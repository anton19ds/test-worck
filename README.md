# Среда разработки PHP на базе Docker
## Требования

- Git.
- Docker engine 19.x и выше. 

## Возможности и особенности

- Базы данных:
  - **MySQL 8**.
- Настройка основных параметров окружения через файл **.env**.
- Возможность модификации сервисов через **docker-compose.yml**.
- Все docker-контейнеры базируются на официальных образах.
- Структурированный **Dockerfile** для создания образов **PHP**.
## Структура проекта

Рассмотрим структуру проекта.

```
├── .env
├── .ssh
├── README.md
├── docker-compose.yml
├── mysql-8
├── php-ini
├── php-workers
├── php-8-workspace
├── projects
```
```dotenv
# Временная зона
WORKSPACE_TIMEZONE='Europe/Moscow'

# XDEBUG
DOCKER_PHP_ENABLE_XDEBUG='on'

# Настройки MySQL 8.x
MYSQL_ROOT_PASSWORD=test
MYSQL_DATABASE=test
# Порт, который следует использовать
# для соединения с локального компьютера
MYSQL_8_PORT=4308

# Настройки PHP 8.0
# Внешний порт, доступен с локального компьютера
PHP_8_0_PORT=9006

```

### .ssh

Этот каталог предназначен для хранения ssh-ключей.

### mysql-8

Каталог базы данных MySQL 8.

```
├── conf.d
│   └── config-file.cnf
├── data
├── dump
└── logs
```

**config-file.cnf** — файл конфигурации. В этот файл можно добавлять параметры, которые при перезапуске MySQL 8 будут применены.

**data** — эта папка предназначена для хранения пользовательских данных MySQL 8.

**dump** — каталог для хранения дампов.

**logs** — каталог для хранения логов.

```

В файле конфигурации описаны настройки для проектоa — **project.ru**.
Здесь следует обратить внимание на то, как производится перенаправление запросов к нужному docker-контейнеру.
```

### projects


```
project.ru
...
```


## Программы в docker-контейнерах PHP

Полный перечень приложений, которые установлены в контейнерах **php-x.x** можно посмотреть в **php-n-workspace/Dockerfile**.

Здесь перечислим лишь некоторые, наиболее важные:

- bash
- htop
- curl
- Git
- Сomposer
- make
- wget
- NodeJS
- Supervisor
- npm


## Начало работы

<br>

**1**. Выполните клонирование данного репозитория в любое место на вашем компьютере. 

```shell script
git clone https://github.com/anton19ds/test-worck
```

Перейдите в директорию, в которую вы клонировали репозиторий. Все дальнейшие команды следует выполнять именно в этой директории.

**2**. Создайте контейнеры и запустите их.

Выполните команду:

```shell script
docker-compose build && docker-compose up -d
```

Создание контейнеров займёт некоторое время. Обычно, от 10 до 30 минут. Дождитесь окончания процесса. Ваш компьютер не должен во время данного процесса потерять доступ в интернет.  

**3**. Проверьте созданные docker-контейнеры.   
  
Выполните команду:

```shell script
docker ps
```  
  

**4**. Запуск.

```shell script
docker exec -it php-8.0 bash  
```
```shell script
>cd project.ru
>php index.php
>dcci
```